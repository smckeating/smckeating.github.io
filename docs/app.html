<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>EMS Health App ver 0.1</title>
        <link rel="stylesheet" href="web.css">
        <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue@2.7.16/dist/vue.js"></script>
        
        <style>
          .vertical-list {
            list-style-type: none;
            padding: 0;
          }
          .vertical-list li {
            margin-bottom: 5px;
          }
        </style>
    </head>
<body>

<div id="app">
  <h1>{{ title }}</h1>
  <nav>
    <button @click="currentTab = 'Demographics'">Demographics</button>
    <button @click="currentTab = 'Problems'">Problems</button>
    <button @click="currentTab = 'Medications'">Medications</button>
    <button @click="currentTab = 'Vitals'">Vitals</button>
  </nav>
  <div class="content">
    <div v-if="currentTab === 'Demographics'">
      <h2>Demographics</h2>
      <ul class="vertical-list">
        <li>Name: {{ patientData ? patientData.name : '' }}</li>
        <li>Age: {{ demographics.age }}</li>
        <li>Gender: {{ demographics.gender }}</li>
        <li>Gender2: {{ patientData ? patientData.gender : '' }}</li>
        <li>Height: {{ demographics.height }}</li>
        <li>Weight: {{ demographics.weight }}</li>
        <li>Allergies: {{ demographics.allergies }}</li>
        <li>Language: {{ demographics.language }}</li>
      </ul>
    </div>
    <div v-if="currentTab === 'Problems'">
      <h2>Problems</h2>
      <ul class="vertical-list">
        <li>Problem: {{ problems.problem }}</li>
        <li>Onset Date: {{ problems.onsetDate }}</li>
      </ul>
    </div>
    <div v-if="currentTab === 'Medications'">
      <h2>Medications</h2>
      <ul class="vertical-list">
        <li>Medication: {{ medications.med }}</li>
        <li>Dose: {{ medications.dose }}</li>
      </ul>
    </div>
    <div v-if="currentTab === 'Vitals'">
      <h2>Vitals</h2>
      <ul class="vertical-list">
        <li>Pulse: {{ vitals.pulse }}</li>
        <li>Blood Pressure: {{ vitals.bp }}</li>
        <li>Respiratory Rate: {{ vitals.resp }}</li>
        <li>Temperature: {{ vitals.temp }}</li>
        <li>SpO2: {{ vitals.spo2 }}</li>
      </ul>
    </div>
  </div>
</div>

<script>
new Vue({
  el: '#app',
  data: {
    title: 'EMS Health App',
    currentTab: 'Demographics',
    demographics: {
      name: 'John Doe',
      age: 35,
      gender: 'Male',
      height: '6\'0"',
      weight: '180 lbs',
      allergies: 'Peanuts, Pollen',
      language: 'English'
    },
    problems: {
      problem: 'Asthma',
      onsetDate: '2022-04-15'
    },
    medications: {
      med: 'Albuterol',
      dose: '2 puffs'
    },
    vitals: {
      pulse: '74',
      bp:'132/94',
      temp: '98.4',
      resp: '16',
      spo2: '98%'
    },
    patientData: null
  },
  mounted() {
    FHIR.oauth2.ready()
      .then(client => client.request("Patient"))
      .then(patientData => {
          this.patientData = patientData;
          console.log("Patient Data:", patientData);
          console.log(client.request("Patient"));
        })
      .catch(error => {
          console.error("Error:", error);
      });
  }
});
</script>

</body>
</html>
